<!DOCTYPE html>
<html>
<head>
  <title>Grow A Stock</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    body {
      background: #111;
      color: #fff;
      font-family: Arial;
      padding: 20px;
      margin: 0;
    }

    .chart-canvas {
      background: #222;
      border: 1px solid #555;
    }

    .controls {
      margin-top: 20px;
    }

    input, button, select {
      font-size: 16px;
      padding: 5px;
      margin: 5px;
    }

    #console {
      background: #000;
      padding: 10px;
      font-family: monospace;
      height: 150px;
      overflow-y: auto;
      border: 1px solid #333;
      margin-top: 10px;
    }

    #leaderboard {
      margin-top: 20px;
      border: 1px solid #555;
      padding: 10px;
      background: #1a1a1a;
    }

    #leaderboard h3 {
      margin-top: 0;
      color: #777;
    }

    #leaderboard ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    #leaderboard li {
      margin-bottom: 5px;
    }

    .redbutton, .greenbutton {
      border-radius: 10px;
      color: white;
      border: 0;
      width: 20%;
      height: 60%;
    }

    .redbutton {
      background-color: crimson;
    }

    .greenbutton {
      background-color: #597;
    }

    .redbutton:hover,
    .greenbutton:hover {
      background-color: grey;
    }

    .bottom-nav {
      position: fixed;
      bottom: 0;
      width: 100%;
      background: #1a1a1a;
      display: flex;
      justify-content: space-around;
      border-top: 1px solid #333;
      padding: 10px 0;
      z-index: 100;
    }

    .bottom-nav button {
      background: none;
      color: white;
      border: none;
      font-size: 14px;
      flex: 1;
      padding: 5px 0;
      transition: color 0.2s ease;
    }

    .bottom-nav button:hover {
      color: gold;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    @media (min-width: 800px) {
      .bottom-nav {
        display: none;
      }
    }

    #tipBox {
      margin-top: 20px;
      font-style: italic;
      text-align: center;
    }
  </style>
</head>

<body>
  <h3>Grow A Stock ðŸ“ˆ</h3>

  <div id="baseTab" class="tab-content active">
    <center>
      <h1>Grow A Stock ðŸ“Š</h1>
      <p>Grow Your Stock and Gain Cash</p>
      <p>Learn to trade and build your empire!</p>
      <div id="tipBox">Tip</div>
    </center>

    <div id="leaderboard">
      <h3>Top Profit Global</h3>
      <ul id="leaderboardList"></ul>
    </div>

    <figure>Cash: $<span id="cashDisplay">1000</span> â€¢ Profit: <span id="profitDisplay">0</span>%</figure>
    <figure>User Active: <span id="playerCountDisplay">3</span></figure>

    <div id="chartWrapper" style="position: relative;">
      <canvas id="Chart" style="min-width: 300px; height: 300px;"></canvas>
    </div>

    <p>Market Price: $<span id="priceDisplay">0</span></p>
    <p>Item: (<span id="selectedItemDisplay">Oil</span> <span id="inventoryDisplay">0</span>x)</p>

    <div class="controls">
      <select id="itemSelector" onchange="switchItem(this.value)">
        <option value="Gold">Gold</option>
        <option value="Crypto">Crypto</option>
        <option value="Oil" selected>Oil</option>
      </select>

      <input type="number" id="amount" placeholder="Amount" value="1">
      <hr>
      <button class="greenbutton" onclick="buy()">Buy</button>
      <button class="redbutton" onclick="sell()">Sell</button>

      <p>Console:</p>
      <div id="console"></div>
    </div>
  </div>

  <div class="bottom-nav">
    <button onclick="switchTab('baseTab')">Market</button>
  </div>

  <audio id="graphSound" src="Sounds/sound-3.mp3"></audio>
  <audio id="orderSound" src="Sounds/sound-1.mp3"></audio>
  <audio id="eventSound" src="Sounds/sound-2.mp3"></audio>
  <audio id="buy" src="Sounds/sound-4.mp3"></audio>
  <audio id="sell" src="Sounds/sound-5.mp3"></audio>

  <script>
    const tips = [
      "Bumagsak man ang stock, hindi ibig sabihin babagsak ka rin.",
      "Nag-invest ka, pero siya hindi.",
      "Parang chart ng feelings mo â€” paakyat, pababa, wala sa hulog.",
      "Akala mo to the moon, yun pala to the floor.",
      "Mag-invest ka rin sa sarili mo, hindi lang puro sa kanya."
    ];
    function showRandomTip() {
      const randomIndex = Math.floor(Math.random() * tips.length);
      document.getElementById("tipBox").textContent = "Tip: " + tips[randomIndex];
    }
    showRandomTip();
    setInterval(showRandomTip, 30000);
  </script>

  <script>
    const consoleDiv = document.getElementById("console");
    const priceDisplay = document.getElementById("priceDisplay");
    const cashDisplay = document.getElementById("cashDisplay");
    const inventoryDisplay = document.getElementById("inventoryDisplay");
    const selectedItemDisplay = document.getElementById("selectedItemDisplay");
    const profitDisplay = document.getElementById("profitDisplay");
    const playerCountDisplay = document.getElementById("playerCountDisplay");
    const leaderboardList = document.getElementById("leaderboardList");

    function playSound(id) {
      const audio = document.getElementById(id);
      if (audio) {
        audio.currentTime = 0;
        audio.play();
      }
    }

    let cash = parseFloat(localStorage.getItem('cash')) || 1000;
    let maxFakePlayers = 100;
    let fakePlayerCount = Math.floor(Math.random() * maxFakePlayers) + 1;

    const inventory = JSON.parse(localStorage.getItem('inventory')) || { Gold: 0, Crypto: 0, Oil: 0 };
    const profit = JSON.parse(localStorage.getItem('profit')) || { Gold: 0, Crypto: 0, Oil: 0 };
    const prices = { Gold: 50, Crypto: 120, Oil: 40 };
    let selected = 'Oil';

    const labels = [];
    const data = {
      labels: labels,
      datasets: [{
        label: 'Price',
        data: [],
        borderColor: '#597',
        backgroundColor: 'rgba(0,255,0,0.1)',
        segment: {
          borderColor: ctx => ctx.p1.parsed.y < ctx.p0.parsed.y ? 'crimson' : '#597',
          backgroundColor: ctx => ctx.p1.parsed.y < ctx.p0.parsed.y ? 'rgba(220,20,60,0.1)' : 'rgba(0,255,0,0.1)'
        },
        tension: 0.2,
        pointRadius: 3,
        pointHoverRadius: 8,
        pointHoverBackgroundColor: '#597'
      }]
    };

    const config = {
      type: 'line',
      data: data,
      options: {
        responsive: true,
        maintainAspectRatio: false,
        animation: { duration: 800, easing: 'easeOutQuart' },
        scales: {
          y: { ticks: { color: '#fff' }, grid: { color: '#444' } },
          x: { ticks: { color: '#fff' }, grid: { color: '#444' } }
        },
        plugins: { legend: { labels: { color: '#fff' } } }
      }
    };

    const ctx = document.getElementById('Chart').getContext('2d');
    const chart = new Chart(ctx, config);

    function log(msg) {
      consoleDiv.innerHTML += msg + '<br>';
      consoleDiv.scrollTop = consoleDiv.scrollHeight;
    }

    function updateUI() {
      priceDisplay.textContent = prices[selected].toFixed(2);
      cashDisplay.textContent = cash.toFixed(2);
      inventoryDisplay.textContent = inventory[selected];
      selectedItemDisplay.textContent = selected;
      profitDisplay.textContent = profit[selected].toFixed(2);
      playerCountDisplay.textContent = fakePlayerCount;
    }

    function buy() {
      const amount = parseInt(document.getElementById("amount").value);
      if (isNaN(amount) || amount <= 0) return alert("Enter a valid amount.");
      const total = prices[selected] * amount;
      if (cash >= total) {
        cash -= total;
        inventory[selected] += amount;
        log("Bought " + amount + " " + selected + " for $" + total.toFixed(2));
        playSound("buy");
        saveGame();
        updateUI();
      } else {
        log("Not enough cash!");
      }
    }

    function sell() {
      const amount = parseInt(document.getElementById("amount").value);
      if (isNaN(amount) || amount <= 0) return alert("Enter a valid amount.");
      if (inventory[selected] >= amount) {
        const revenue = prices[selected] * amount;
        cash += revenue;
        inventory[selected] -= amount;
        profit[selected] += revenue - (amount * prices[selected]);
        log("Sold " + amount + " " + selected + " for $" + revenue.toFixed(2));
        playSound("sell");
        saveGame();
        updateUI();
      } else {
        log("Not enough items to sell!");
      }
    }

    function switchItem(item) {
      selected = item;
      updateUI();
      chart.data.labels = [];
      chart.data.datasets[0].data = [];
    }

    function updateChart() {
      const time = new Date().toLocaleTimeString();
      const newPrice = prices[selected] + (Math.random() * 10 - 5);
      prices[selected] = Math.max(newPrice, 1);

      if (labels.length > 20) {
        labels.shift();
        chart.data.datasets[0].data.shift();
      }
      labels.push(time);
      chart.data.datasets[0].data.push(prices[selected]);
      chart.update();

      updateUI();
      playSound("graphSound");
    }

    function saveGame() {
      localStorage.setItem('cash', cash);
      localStorage.setItem('inventory', JSON.stringify(inventory));
      localStorage.setItem('profit', JSON.stringify(profit));
    }

    function switchTab(id) {
      document.querySelectorAll(".tab-content").forEach(tab => tab.classList.remove("active"));
      document.getElementById(id).classList.add("active");
    }

    window.addEventListener("load", () => {
      switchTab("baseTab");
      updateUI();
      setInterval(updateChart, 3000);
    });
  </script>
</body>
</html>
